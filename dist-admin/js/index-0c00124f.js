import{a as w,c as F,b as z,F as N,G as T,H as A,d as M,e as L,f as P,g as K,A as j}from"./element-plus@2.3.6_vue@3.2.47-b0afb102.js";import{b as G,w as E}from"./@vue_runtime-dom@3.2.47-29a82bf7.js";import{h as d,a as B}from"./index-bc56dcd5.js";import{D as H}from"./debounce-d39f6322.js";import{r as _,j as R,u as t,i as Y}from"./@vue_reactivity@3.2.47-f1f0bfd6.js";import{o as g,c as $,e as l,L as o,a as J,P as p,n as O,K as y,O as x,Y as Q}from"./@vue_runtime-core@3.2.47-fc168a25.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue_shared@3.2.47-ad77ec3c.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@vueuse_core@9.13.0_vue@3.2.47-9c54f61c.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-c9be2d58.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-0922d443.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-78ff42bf.js";import"./pinia@2.0.33_vue@3.2.47-113b2d6e.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-157ae188.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-52add623.js";import"./side-channel@1.1.0-d2eaf7ff.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-41168540.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-6131bab0.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-19420b51.js";const W={searchMenuSpan:6,columnBtn:!1,border:!0,index:!1,selection:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"热搜标题",prop:"title",search:!0},{label:"热搜内容",prop:"content",search:!0},{label:"录入时间",prop:"recDate",sortable:!0},{label:"顺序",prop:"seq",sortable:!0},{label:"启用状态",prop:"status",type:"select",slot:!0,search:!0,dicData:[{label:"未启用",value:0},{label:"启用",value:1}]}]},X={class:"mod-hotSearch-add-or-update"},Z={class:"dialog-footer"},ee={__name:"add-or-update",emits:["refreshDataList"],setup(q,{expose:V,emit:h}){const r=_({hotSearchId:0,title:"",content:"",recDate:"",seq:0,status:0}),b=R({total:0,currentPage:1,pageSize:10}),u=_(!1),C={title:[{required:!0,message:"标题不能为空",trigger:"blur"},{min:1,max:50,message:"长度在1到50个字符内",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"},{min:1,max:255,message:"长度在1到255个字符内",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"内容不能为空",trigger:"blur"}]},S=_(null);V({init:v=>{r.value.hotSearchId=v||0,u.value=!0,O(()=>{var e;(e=S.value)==null||e.resetFields(),r.value.hotSearchId&&d({url:d.adornUrl("/admin/hotSearch/info/"+r.value.hotSearchId),method:"get",params:d.adornParams()}).then(({data:c})=>{r.value=c})})}});const k=H(()=>{var v;(v=S.value)==null||v.validate(e=>{if(e){const c=r.value;d({url:d.adornUrl("/admin/hotSearch"),method:c.hotSearchId?"put":"post",data:d.adornData(c)}).then(()=>{w({message:"操作成功",type:"success",duration:1500,onClose:()=>{u.value=!1,h("refreshDataList",b)}})})}})});return(v,e)=>{const c=F,a=z,n=N,s=T,m=A,D=M,f=L,U=P;return g(),$("div",X,[l(U,{modelValue:t(u),"onUpdate:modelValue":e[7]||(e[7]=i=>Y(u)?u.value=i:null),title:t(r).hotSearchId?"修改":"新增","close-on-click-modal":!1},{footer:o(()=>[J("div",Z,[l(f,{onClick:e[5]||(e[5]=i=>u.value=!1)},{default:o(()=>[p(" 取消 ")]),_:1}),l(f,{type:"primary",onClick:e[6]||(e[6]=i=>t(k)())},{default:o(()=>[p(" 确定 ")]),_:1})])]),default:o(()=>[l(D,{ref_key:"dataFormRef",ref:S,model:t(r),rules:C,"label-width":"80px",onKeyup:e[4]||(e[4]=G(i=>t(k)(),["enter"]))},{default:o(()=>[l(a,{label:"标题",prop:"title"},{default:o(()=>[l(c,{modelValue:t(r).title,"onUpdate:modelValue":e[0]||(e[0]=i=>t(r).title=i),"controls-position":"right",min:0,maxlength:"50","show-word-limit":"",label:"标题"},null,8,["modelValue"])]),_:1}),l(a,{label:"内容",prop:"content"},{default:o(()=>[l(c,{modelValue:t(r).content,"onUpdate:modelValue":e[1]||(e[1]=i=>t(r).content=i),"controls-position":"right",type:"textarea",min:0,maxlength:"255","show-word-limit":"",label:"内容"},null,8,["modelValue"])]),_:1}),l(a,{label:"排序号",prop:"seq"},{default:o(()=>[l(n,{modelValue:t(r).seq,"onUpdate:modelValue":e[2]||(e[2]=i=>t(r).seq=i),"controls-position":"right",min:0,label:"排序号"},null,8,["modelValue"])]),_:1}),l(a,{label:"状态",prop:"status"},{default:o(()=>[l(m,{modelValue:t(r).status,"onUpdate:modelValue":e[3]||(e[3]=i=>t(r).status=i)},{default:o(()=>[l(s,{label:0},{default:o(()=>[p(" 下线 ")]),_:1}),l(s,{label:1},{default:o(()=>[p(" 正常 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},te={class:"mod-hotSearcch"},Ze={__name:"index",setup(q){const V=_([]),h=R({total:0,currentPage:1,pageSize:10}),r=_(!1),b=(a,n,s)=>{r.value=!0,d({url:d.adornUrl("/admin/hotSearch/page"),method:"get",params:d.adornParams(Object.assign({current:a?a.currentPage:1,size:a?a.pageSize:20},n))}).then(({data:m})=>{h.total=m.total,h.pageSize=m.size,h.currentPage=m.current,V.value=m.records,r.value=!1,s&&s()})},u=_([]),C=a=>{u.value=a},S=_(!1),I=_(null),k=a=>{S.value=!0,O(()=>{var n;(n=I.value)==null||n.init(a)})},v=(a,n)=>{b(h,a,n)},e=a=>{var s;const n=a.hotSearchId?[a.hotSearchId]:(s=u.value)==null?void 0:s.map(m=>m.hotSearchId);K.confirm(`确定进行[${a.hotSearchId?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d({url:d.adornUrl("/admin/hotSearch"),method:"delete",data:d.adornData(n,!1)}).then(()=>{w({message:"操作成功",type:"success",duration:1500,onClose:()=>{b()}})})}).catch(()=>{})},c=()=>{b(h)};return(a,n)=>{const s=L,m=j,D=Q("avue-crud");return g(),$("div",te,[l(D,{ref:"crudRef",page:t(h),data:t(V),"table-loading":t(r),option:t(W),onSearchChange:v,onOnLoad:b,onRefreshChange:c,onSelectionChange:C},{"menu-left":o(()=>[t(B)("admin:hotSearch:save")?(g(),y(s,{key:0,type:"primary",icon:"el-icon-plus",onClick:n[0]||(n[0]=f=>k())},{default:o(()=>[p(" 新增 ")]),_:1})):x("",!0),l(s,{type:"danger",disabled:t(u).length<=0,onClick:E(e,["stop"])},{default:o(()=>[p(" 批量删除 ")]),_:1},8,["disabled","onClick"])]),status:o(f=>[f.row.status===0?(g(),y(m,{key:0,type:"danger"},{default:o(()=>[p(" 未启用 ")]),_:1})):(g(),y(m,{key:1},{default:o(()=>[p(" 启用 ")]),_:1}))]),menu:o(f=>[t(B)("admin:hotSearch:update")?(g(),y(s,{key:0,type:"primary",icon:"el-icon-edit",onClick:U=>k(f.row.hotSearchId)},{default:o(()=>[p(" 修改 ")]),_:2},1032,["onClick"])):x("",!0),t(B)("admin:hotSearch:deconste")?(g(),y(s,{key:1,type:"danger",icon:"el-icon-deconste",onClick:E(U=>e(f.row,f.index),["stop"])},{default:o(()=>[p(" 删除 ")]),_:2},1032,["onClick"])):x("",!0)]),_:1},8,["page","data","table-loading","option"]),t(S)?(g(),y(ee,{key:0,ref_key:"addOrUpdateRef",ref:I,onRefreshDataList:b},null,512)):x("",!0)])}}};export{Ze as default};
