import{a as D,c as O,b as S,G as F,H as A,d as $,e as B,f as z,g as P}from"./element-plus@2.3.6_vue@3.2.47-b0afb102.js";import{b as K}from"./@vue_runtime-dom@3.2.47-29a82bf7.js";import{h as s}from"./index-bc56dcd5.js";import{r as _,u as o,i as M,j}from"./@vue_reactivity@3.2.47-f1f0bfd6.js";import{o as c,K as U,L as a,a as G,e as l,P as u,O as h,c as v,F as H,W as J,n as R,Y as W}from"./@vue_runtime-core@3.2.47-fc168a25.js";import{O as N}from"./@vue_shared@3.2.47-ad77ec3c.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vueuse_core@9.13.0_vue@3.2.47-9c54f61c.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-c9be2d58.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-0922d443.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-78ff42bf.js";import"./pinia@2.0.33_vue@3.2.47-113b2d6e.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-157ae188.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-52add623.js";import"./side-channel@1.1.0-d2eaf7ff.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-41168540.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-6131bab0.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-19420b51.js";const Y={searchMenuSpan:6,columnBtn:!1,border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"商品名",prop:"prodName",search:!0},{label:"用户昵称",prop:"nickName",slot:!0},{label:"记录时间",prop:"recTime",width:"200"},{label:"回复时间",slot:!0,prop:"replyTime",width:"200",dicData:[{label:"无",value:""}]},{label:"评价得分",prop:"score"},{label:"是否匿名",prop:"isAnonymous",dicData:[{label:"否",value:0},{label:"是",value:1}]},{prop:"status",label:"审核状态",search:!0,type:"select",dicData:[{label:"待审核",value:0},{label:"审核通过",value:1},{label:"审核未通过",value:-1}]}]},q={key:0},Q={key:0},X={key:1},Z=["src"],ee={class:"dialog-footer"},oe={__name:"add-or-update",emits:["refreshDataList"],setup(E,{expose:k,emit:y}){const g=_({}),m=_(!1),t=_({prodCommId:null,prodId:null,orderItemId:null,userId:null,content:null,replyContent:null,recTime:null,replyTime:null,replySts:null,postip:null,score:null,usefulCounts:null,photoJson:null,isAnonymous:null,status:null});k({init:(b,e)=>{m.value=e,t.value.prodCommId=b||0,f.value=!0,R(()=>{var d;(d=C.value)==null||d.resetFields(),t.value.prodCommId&&s({url:s.adornUrl("/prod/prodComm/info/"+t.value.prodCommId),method:"get",params:s.adornParams()}).then(({data:n})=>{t.value=n})})}});const f=_(!1),C=_(null),V=()=>{var b;(b=C.value)==null||b.validate(e=>{e&&s({url:s.adornUrl("/prod/prodComm"),method:t.value.prodCommId?"put":"post",data:s.adornData(t.value)}).then(()=>{D({message:"操作成功",type:"success",duration:1500,onClose:()=>{f.value=!1,y("refreshDataList")}})})})};return(b,e)=>{const d=O,n=S,p=F,i=A,w=$,x=B,L=z;return c(),U(L,{modelValue:o(f),"onUpdate:modelValue":e[11]||(e[11]=r=>M(f)?f.value=r:null),title:o(t).prodCommId?"修改":"新增","close-on-click-modal":!1},{footer:a(()=>[G("div",ee,[l(x,{onClick:e[9]||(e[9]=r=>f.value=!1)},{default:a(()=>[u(" 取消 ")]),_:1}),o(m)?(c(),U(x,{key:0,type:"primary",onClick:e[10]||(e[10]=r=>V())},{default:a(()=>[u(" 确定 ")]),_:1})):h("",!0)])]),default:a(()=>[l(w,{ref_key:"dataFormRef",ref:C,model:o(t),rules:o(g),"label-width":"80px",onKeyup:e[8]||(e[8]=K(r=>V(),["enter"]))},{default:a(()=>[o(m)?h("",!0):(c(),v("div",q,[l(n,{label:"评论内容",prop:"userName"},{default:a(()=>[l(d,{modelValue:o(t).content,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).content=r),type:"textarea",readonly:!0},null,8,["modelValue"])]),_:1}),l(n,{label:"评论图片",prop:"userName"},{default:a(()=>{var r;return[(r=o(t).pics)!=null&&r.length?(c(),v("div",X,[(c(!0),v(H,null,J(o(t).pics,T=>(c(),v("img",{key:T,alt:"","max-width":"100%",src:b.dialogImageUrl+T},null,8,Z))),128))])):(c(),v("div",Q," 无 "))]}),_:1}),l(n,{label:"记录时间",prop:"userName"},{default:a(()=>[l(d,{modelValue:o(t).recTime,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).recTime=r),readonly:!0},null,8,["modelValue"])]),_:1}),l(n,{label:"回复时间",prop:"userName",readonly:!0},{default:a(()=>[l(d,{modelValue:o(t).replyTime,"onUpdate:modelValue":e[2]||(e[2]=r=>o(t).replyTime=r),readonly:!0},null,8,["modelValue"])]),_:1}),l(n,{label:"IP来源",prop:"userName"},{default:a(()=>[l(d,{modelValue:o(t).postip,"onUpdate:modelValue":e[3]||(e[3]=r=>o(t).postip=r),readonly:!0},null,8,["modelValue"])]),_:1}),l(n,{label:"得分",prop:"score"},{default:a(()=>[l(d,{modelValue:o(t).score,"onUpdate:modelValue":e[4]||(e[4]=r=>o(t).score=r),readonly:!0},null,8,["modelValue"])]),_:1}),l(n,{label:"是否匿名",prop:"isAnonymous"},{default:a(()=>[l(i,{modelValue:o(t).isAnonymous,"onUpdate:modelValue":e[5]||(e[5]=r=>o(t).isAnonymous=r),disabled:!0},{default:a(()=>[l(p,{label:1},{default:a(()=>[u(" 是 ")]),_:1}),l(p,{label:0},{default:a(()=>[u(" 不是 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})])),l(n,{label:"掌柜回复",type:"textarea",prop:"userName"},{default:a(()=>[l(d,{modelValue:o(t).replyContent,"onUpdate:modelValue":e[6]||(e[6]=r=>o(t).replyContent=r),readonly:!o(m)},null,8,["modelValue","readonly"])]),_:1}),o(m)?(c(),U(n,{key:1,label:"审核",prop:"status"},{default:a(()=>[l(i,{modelValue:o(t).status,"onUpdate:modelValue":e[7]||(e[7]=r=>o(t).status=r),readonly:!0},{default:a(()=>[l(p,{label:1},{default:a(()=>[u(" 审核通过 ")]),_:1}),l(p,{label:-1},{default:a(()=>[u(" 不通过 ")]),_:1}),l(p,{label:0},{default:a(()=>[u(" 等待审核 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}},te={class:"mod-prod-prodComm"},Ze={__name:"index",setup(E){const k=_([]),y=j({total:0,currentPage:1,pageSize:20}),g=_(!1),m=(e,d,n)=>{g.value=!0,s({url:s.adornUrl("/prod/prodComm/page"),method:"get",params:s.adornParams(Object.assign({current:e==null?y.currentPage:e.currentPage,size:e==null?y.pageSize:e.pageSize},d))}).then(({data:p})=>{k.value=p.records,y.total=p.total,g.value=!1,n&&n()})},t=_(!1),I=_(null),f=(e,d)=>{t.value=!0,R(()=>{var n;(n=I.value)==null||n.init(e,d)})},C=e=>{P.confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s({url:s.adornUrl("/prod/prodComm/"+e.prodCommId),method:"delete",data:s.adornData({})}).then(()=>{D({message:"操作成功",type:"success",duration:1500,onClose:()=>{m()}})})}).catch(()=>{})},V=()=>{m(y)},b=(e,d)=>{m(y,e,d)};return(e,d)=>{const n=B,p=W("avue-crud");return c(),v("div",te,[l(p,{ref:"crudRef",page:o(y),data:o(k),"table-loading":o(g),option:o(Y),onSearchChange:b,onOnLoad:m,onRefreshChange:V,onRowDel:C},{nickName:a(i=>[u(N(i.row.user.nickName),1)]),replyTime:a(i=>[u(N(i.row.replyTime?i.row.replyTime:"-"),1)]),menu:a(i=>[l(n,{type:"primary",icon:"el-icon-edit",onClick:w=>f(i.row.prodCommId,!0)},{default:a(()=>[u(" 编辑 ")]),_:2},1032,["onClick"]),l(n,{type:"success",icon:"el-icon-view",onClick:w=>f(i.row.prodCommId,!1)},{default:a(()=>[u(" 查看 ")]),_:2},1032,["onClick"])]),_:1},8,["page","data","table-loading","option"]),o(t)?(c(),U(oe,{key:0,ref_key:"addOrUpdateRef",ref:I,onRefreshDataList:V},null,512)):h("",!0)])}}};export{Ze as default};
