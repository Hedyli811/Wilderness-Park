import{G as ae,H as ce,b as G,c as ue,I as pe,F as me,e as K,Q as de,D as ve,R as ge,N as Ee,d as H,f as fe,a as Q,C as Ve,g as Ie,B as Le,A as Re}from"./element-plus@2.3.6_vue@3.2.47-b0afb102.js";import{d as e,h as a,t as W,i as ye,a as C}from"./index-6667c2ae.js";import{b as De}from"./@vue_runtime-dom@3.2.47-29a82bf7.js";import{D as Pe}from"./debounce-d39f6322.js";import{r as v,j as Te,u as r,i as j}from"./@vue_reactivity@3.2.47-f1f0bfd6.js";import{t as Oe,f as Y,Y as J,o as _,K as p,L as s,a as $,e as i,P as d,c as U,W as q,F as z,O as f,n as X}from"./@vue_runtime-core@3.2.47-fc168a25.js";import{O as N,q as Ae}from"./@vue_shared@3.2.47-ad77ec3c.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vueuse_core@9.13.0_vue@3.2.47-9c54f61c.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-c9be2d58.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-0922d443.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-78ff42bf.js";import"./pinia@2.0.33_vue@3.2.47-113b2d6e.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-157ae188.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-6c5b1c66.js";import"./side-channel@1.1.0-50535f43.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-3d184ac6.js";import"./get-intrinsic@1.3.0-cf5c2bd1.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-b58db3ef.js";import"./dunder-proto@1.0.1-b234d88c.js";import"./call-bind-apply-helpers@1.0.2-ab6903ca.js";import"./function-bind@1.1.2-61637ca6.js";import"./hasown@2.0.2-f331d4a8.js";import"./call-bound@1.0.4-165459bc.js";import"./side-channel-weakmap@1.0.2-b72a0d20.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-19420b51.js";const be=$("div",null,"全站推荐使用SVG Sprite, 详细请参考:icons/index.js 描述",-1),he=$("i",{class:"el-icon-warning"},null,-1),ke={class:"dialog-footer"},we={__name:"add-or-update",emits:["refreshDataList"],setup(Z,{expose:b,emit:T}){const L=v(null),y=v(null),D=Oe(()=>({width:"396px"})),E=v(!1),o=Te({id:0,type:1,typeList:["目录","菜单","按钮"],name:"",parentId:0,url:"",perms:"",orderNum:0,icon:"",iconList:[]}),m=v([]),c=v([]),P={value:"menuId",label:"name",checkStrictly:!0},h=v({name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"请输入正确的菜单名称",trigger:"blur"}],url:[{validator:(u,t,R)=>{o.type===1&&!/\S/.test(t)?R(new Error("菜单URL不能为空")):R()},trigger:"blur"}]});Y(()=>{k()});const g=[],k=()=>{const u=Object.assign({"/src/icons/svg/icon-Data.svg":()=>e(()=>import("./icon-Data-37ce314b.js"),[]),"/src/icons/svg/icon-Distribution.svg":()=>e(()=>import("./icon-Distribution-e3b21aad.js"),[]),"/src/icons/svg/icon-Distribution1.svg":()=>e(()=>import("./icon-Distribution1-65a2c93d.js"),[]),"/src/icons/svg/icon-Finance.svg":()=>e(()=>import("./icon-Finance-54f08bc9.js"),[]),"/src/icons/svg/icon-Group.svg":()=>e(()=>import("./icon-Group-e162d13e.js"),[]),"/src/icons/svg/icon-Live.svg":()=>e(()=>import("./icon-Live-9741b946.js"),[]),"/src/icons/svg/icon-Marketing.svg":()=>e(()=>import("./icon-Marketing-9078489c.js"),[]),"/src/icons/svg/icon-Message.svg":()=>e(()=>import("./icon-Message-f3187dee.js"),[]),"/src/icons/svg/icon-Platform.svg":()=>e(()=>import("./icon-Platform-68e9254a.js"),[]),"/src/icons/svg/icon-Points.svg":()=>e(()=>import("./icon-Points-b6a21dbb.js"),[]),"/src/icons/svg/icon-Product.svg":()=>e(()=>import("./icon-Product-a3b32c83.js"),[]),"/src/icons/svg/icon-Resources.svg":()=>e(()=>import("./icon-Resources-8bc6c3ba.js"),[]),"/src/icons/svg/icon-Settlement.svg":()=>e(()=>import("./icon-Settlement-fb51ffcd.js"),[]),"/src/icons/svg/icon-admin.svg":()=>e(()=>import("./icon-admin-10e2ece9.js"),[]),"/src/icons/svg/icon-bianji.svg":()=>e(()=>import("./icon-bianji-b8801b54.js"),[]),"/src/icons/svg/icon-config.svg":()=>e(()=>import("./icon-config-ace47862.js"),[]),"/src/icons/svg/icon-dangdifill.svg":()=>e(()=>import("./icon-dangdifill-8fbaa89e.js"),[]),"/src/icons/svg/icon-daohang.svg":()=>e(()=>import("./icon-daohang-b9b19690.js"),[]),"/src/icons/svg/icon-decorate.svg":()=>e(()=>import("./icon-decorate-9cb1f399.js"),[]),"/src/icons/svg/icon-duanxin.svg":()=>e(()=>import("./icon-duanxin-54f483bc.js"),[]),"/src/icons/svg/icon-editor.svg":()=>e(()=>import("./icon-editor-d425328d.js"),[]),"/src/icons/svg/icon-financial.svg":()=>e(()=>import("./icon-financial-4c8375f4.js"),[]),"/src/icons/svg/icon-form.svg":()=>e(()=>import("./icon-form-f8261a40.js"),[]),"/src/icons/svg/icon-geren.svg":()=>e(()=>import("./icon-geren-3193bce1.js"),[]),"/src/icons/svg/icon-goods.svg":()=>e(()=>import("./icon-goods-6d565e02.js"),[]),"/src/icons/svg/icon-inventory.svg":()=>e(()=>import("./icon-inventory-d40b1a4e.js"),[]),"/src/icons/svg/icon-jiesuo.svg":()=>e(()=>import("./icon-jiesuo-765eebf7.js"),[]),"/src/icons/svg/icon-job.svg":()=>e(()=>import("./icon-job-110ff676.js"),[]),"/src/icons/svg/icon-log.svg":()=>e(()=>import("./icon-log-1ef54be7.js"),[]),"/src/icons/svg/icon-members.svg":()=>e(()=>import("./icon-members-19689099.js"),[]),"/src/icons/svg/icon-menu.svg":()=>e(()=>import("./icon-menu-8f20cf05.js"),[]),"/src/icons/svg/icon-msg-tip.svg":()=>e(()=>import("./icon-msg-tip-b66c95a8.js"),[]),"/src/icons/svg/icon-mudedi.svg":()=>e(()=>import("./icon-mudedi-81e46592.js"),[]),"/src/icons/svg/icon-notice.svg":()=>e(()=>import("./icon-notice-8b3142d4.js"),[]),"/src/icons/svg/icon-order.svg":()=>e(()=>import("./icon-order-0f980143.js"),[]),"/src/icons/svg/icon-oss.svg":()=>e(()=>import("./icon-oss-8cbaa54b.js"),[]),"/src/icons/svg/icon-pinglun.svg":()=>e(()=>import("./icon-pinglun-132f6756.js"),[]),"/src/icons/svg/icon-prod.svg":()=>e(()=>import("./icon-prod-02248017.js"),[]),"/src/icons/svg/icon-role.svg":()=>e(()=>import("./icon-role-edff2755.js"),[]),"/src/icons/svg/icon-set.svg":()=>e(()=>import("./icon-set-58fd63fc.js"),[]),"/src/icons/svg/icon-shanchu.svg":()=>e(()=>import("./icon-shanchu-fb7cb791.js"),[]),"/src/icons/svg/icon-shezhi.svg":()=>e(()=>import("./icon-shezhi-ec45a815.js"),[]),"/src/icons/svg/icon-shoucang.svg":()=>e(()=>import("./icon-shoucang-f7fab466.js"),[]),"/src/icons/svg/icon-shoucangfill.svg":()=>e(()=>import("./icon-shoucangfill-fa941648.js"),[]),"/src/icons/svg/icon-shouye.svg":()=>e(()=>import("./icon-shouye-1a043af1.js"),[]),"/src/icons/svg/icon-sousuo.svg":()=>e(()=>import("./icon-sousuo-9383820c.js"),[]),"/src/icons/svg/icon-sql.svg":()=>e(()=>import("./icon-sql-aa7e8b2e.js"),[]),"/src/icons/svg/icon-store.svg":()=>e(()=>import("./icon-store-c58bd5eb.js"),[]),"/src/icons/svg/icon-suoding.svg":()=>e(()=>import("./icon-suoding-c7135782.js"),[]),"/src/icons/svg/icon-system.svg":()=>e(()=>import("./icon-system-ebb3f573.js"),[]),"/src/icons/svg/icon-tixing.svg":()=>e(()=>import("./icon-tixing-843ca7a2.js"),[]),"/src/icons/svg/icon-tubiao.svg":()=>e(()=>import("./icon-tubiao-ea2d8265.js"),[]),"/src/icons/svg/icon-vip.svg":()=>e(()=>import("./icon-vip-5a36857f.js"),[]),"/src/icons/svg/icon-xiangqu.svg":()=>e(()=>import("./icon-xiangqu-5a8bc696.js"),[]),"/src/icons/svg/icon-xiangqufill.svg":()=>e(()=>import("./icon-xiangqufill-456d9a81.js"),[]),"/src/icons/svg/icon-zhedie.svg":()=>e(()=>import("./icon-zhedie-ced925d6.js"),[]),"/src/icons/svg/icon-zonghe.svg":()=>e(()=>import("./icon-zonghe-7a186605.js"),[])});for(const t in u){const R=t.split("/src/icons/svg/")[1].split(".svg")[0];g.push(R)}},V=v(null);b({init:u=>{o.id=u||0,a({url:a.adornUrl("/sys/menu/list"),method:"get",params:a.adornParams()}).then(({data:t})=>{m.value=W(t,"menuId")}).then(()=>{E.value=!0,X(()=>{var t;(t=V.value)==null||t.resetFields()})}).then(()=>{o.id?a({url:a.adornUrl(`/sys/menu/info/${o.id}`),method:"get",params:a.adornParams()}).then(({data:t})=>{o.id=t.menuId,o.type=t.type,o.name=t.name,o.parentId=t.parentId,o.url=t.url,o.perms=t.perms,o.orderNum=t.orderNum,o.icon=t.icon,c.value=ye(m.value,t.parentId,"menuId","children").reverse()}):c.value=[]})}});const l=u=>{o.parentId=u[u.length-1]},w=u=>{o.icon=u},B=Pe(()=>{var u;(u=V.value)==null||u.validate(t=>{t&&a({url:a.adornUrl("/sys/menu"),method:o.id?"put":"post",data:a.adornData({menuId:o.id||void 0,type:o.type,name:o.name,parentId:o.parentId,url:o.url,perms:o.perms,orderNum:o.orderNum,icon:o.icon})}).then(()=>{Q({message:"操作成功",type:"success",duration:1500,onClose:()=>{E.value=!1,T("refreshDataList")}})})})});return(u,t)=>{const R=ae,ee=ce,I=G,O=ue,oe=pe,te=me,re=J("svg-icon"),x=K,se=de,M=ve,ie=ge,ne=Ee,le=H,_e=fe;return _(),p(_e,{modelValue:r(E),"onUpdate:modelValue":t[10]||(t[10]=n=>j(E)?E.value=n:null),title:r(o).id?"修改":"新增","close-on-click-modal":!1},{footer:s(()=>[$("span",ke,[i(x,{onClick:t[8]||(t[8]=n=>E.value=!1)},{default:s(()=>[d("取消")]),_:1}),i(x,{type:"primary",onClick:t[9]||(t[9]=n=>r(B)())},{default:s(()=>[d(" 确定 ")]),_:1})])]),default:s(()=>[i(le,{ref_key:"dataFormRef",ref:V,model:r(o),rules:r(h),"label-width":"80px",onKeyup:t[7]||(t[7]=De(n=>r(B)(),["enter"]))},{default:s(()=>[i(I,{label:"类型",prop:"type"},{default:s(()=>[i(ee,{modelValue:r(o).type,"onUpdate:modelValue":t[0]||(t[0]=n=>r(o).type=n)},{default:s(()=>[(_(!0),U(z,null,q(r(o).typeList,(n,A)=>(_(),p(R,{key:A,label:A},{default:s(()=>[d(N(n),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(I,{label:r(o).typeList[r(o).type]+"名称",prop:"name"},{default:s(()=>[i(O,{modelValue:r(o).name,"onUpdate:modelValue":t[1]||(t[1]=n=>r(o).name=n),placeholder:r(o).typeList[r(o).type]+"名称"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(I,{label:"上级菜单"},{default:s(()=>[i(oe,{modelValue:r(c),"onUpdate:modelValue":t[2]||(t[2]=n=>j(c)?c.value=n:null),"expand-trigger":"hover",options:r(m),props:P,"change-on-select":"",clearable:!0,onChange:l},null,8,["modelValue","options"])]),_:1}),r(o).type===1?(_(),p(I,{key:0,label:"菜单路由",prop:"url"},{default:s(()=>[i(O,{modelValue:r(o).url,"onUpdate:modelValue":t[3]||(t[3]=n=>r(o).url=n),placeholder:"菜单路由"},null,8,["modelValue"])]),_:1})):f("",!0),r(o).type!==0?(_(),p(I,{key:1,label:"授权标识",prop:"perms"},{default:s(()=>[i(O,{modelValue:r(o).perms,"onUpdate:modelValue":t[4]||(t[4]=n=>r(o).perms=n),placeholder:"多个用逗号分隔, 如: user:list,user:create"},null,8,["modelValue"])]),_:1})):f("",!0),r(o).type!==2?(_(),p(I,{key:2,label:"排序号",prop:"orderNum"},{default:s(()=>[i(te,{modelValue:r(o).orderNum,"onUpdate:modelValue":t[5]||(t[5]=n=>r(o).orderNum=n),"controls-position":"right",min:0,label:"排序号"},null,8,["modelValue"])]),_:1})):f("",!0),r(o).type!==2?(_(),p(I,{key:3,label:"菜单图标",prop:"icon"},{default:s(()=>[i(ne,null,{default:s(()=>[i(M,{span:22},{default:s(()=>[i(O,{ref_key:"iconInputRef",ref:L,modelValue:r(o).icon,"onUpdate:modelValue":t[6]||(t[6]=n=>r(o).icon=n),"virtual-ref":r(y),placeholder:"菜单图标名称",clearable:""},null,8,["modelValue","virtual-ref"]),i(se,{ref_key:"iconListPopoverRef",ref:y,style:{width:"390px"},"virtual-ref":r(L),placement:"bottom-start",trigger:"click","popper-style":r(D),"virtual-triggering":""},{default:s(()=>[(_(),U(z,null,q(g,(n,A)=>i(x,{key:A,style:{padding:"8px",margin:"8px 0 0 8px"},class:Ae({"is-active":n===r(o).icon}),onClick:Ce=>w(n)},{default:s(()=>[i(re,{"icon-class":`${n}`},null,8,["icon-class"])]),_:2},1032,["class","onClick"])),64))]),_:1},8,["virtual-ref","popper-style"])]),_:1}),i(M,{span:2,class:"icon-list__tips"},{default:s(()=>[i(ie,{placement:"top",effect:"light"},{content:s(()=>[be]),default:s(()=>[he]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}},xe={class:"mod-menu"},xo={__name:"index",setup(Z){const b=v({});Y(()=>{L()});const T=v([]),L=()=>{a({url:a.adornUrl("/sys/menu/table"),method:"get",params:a.adornParams()}).then(({data:m})=>{T.value=W(m,"menuId")})},y=v(null),D=v(!1),E=m=>{D.value=!0,X(()=>{var c;(c=y.value)==null||c.init(m)})},o=m=>{Ie.confirm(`确定对[id=${m}]进行[删除]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a({url:a.adornUrl(`/sys/menu/${m}`),method:"delete",data:a.adornData()}).then(()=>{Q({message:"操作成功",type:"success",duration:1500,onClose:()=>{L()}})})})};return(m,c)=>{const P=K,F=G,h=H,g=Le,k=J("svg-icon"),V=Re,S=Ve;return _(),U("div",xe,[i(h,{inline:!0,model:r(b)},{default:s(()=>[i(F,null,{default:s(()=>[r(C)("sys:menu:save")?(_(),p(P,{key:0,type:"primary",onClick:c[0]||(c[0]=l=>E())},{default:s(()=>[d(" 新增 ")]),_:1})):f("",!0)]),_:1})]),_:1},8,["model"]),i(S,{data:r(T),border:"",style:{width:"100%"},"row-key":"menuId"},{default:s(()=>[i(g,{prop:"name","header-align":"center","tree-key":"menuId",width:"150",label:"名称"}),i(g,{"header-align":"center",align:"center",label:"图标"},{default:s(l=>[i(k,{"icon-class":`icon-${l.row.icon}`},null,8,["icon-class"])]),_:1}),i(g,{prop:"type","header-align":"center",align:"center",label:"类型"},{default:s(l=>[l.row.type===0?(_(),p(V,{key:0},{default:s(()=>[d(" 目录 ")]),_:1})):l.row.type===1?(_(),p(V,{key:1,type:"success"},{default:s(()=>[d(" 菜单 ")]),_:1})):l.row.type===2?(_(),p(V,{key:2,type:"info"},{default:s(()=>[d(" 按钮 ")]),_:1})):f("",!0)]),_:1}),i(g,{prop:"orderNum","header-align":"center",align:"center",label:"排序号"}),i(g,{prop:"url","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"菜单URL"},{default:s(l=>[d(N(l.row.url||"-"),1)]),_:1}),i(g,{prop:"perms","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"授权标识"},{default:s(l=>[d(N(l.row.perms||"-"),1)]),_:1}),i(g,{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},{default:s(l=>[r(C)("sys:menu:update")?(_(),p(P,{key:0,type:"text",onClick:w=>E(l.row.menuId)},{default:s(()=>[d(" 修改 ")]),_:2},1032,["onClick"])):f("",!0),r(C)("sys:menu:delete")?(_(),p(P,{key:1,type:"text",onClick:w=>o(l.row.menuId)},{default:s(()=>[d(" 删除 ")]),_:2},1032,["onClick"])):f("",!0)]),_:1})]),_:1},8,["data"]),r(D)?(_(),p(we,{key:0,ref_key:"addOrUpdateRef",ref:y,onRefreshDataList:L,onClose:c[1]||(c[1]=l=>D.value=!1)},null,512)):f("",!0)])}}};export{xo as default};
