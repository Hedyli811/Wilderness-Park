import{g as A,a as O,e as z,A as E}from"./element-plus@2.3.6_vue@3.2.47-b0afb102.js";import{w as P}from"./@vue_runtime-dom@3.2.47-29a82bf7.js";import{a as u,h as s}from"./index-6667c2ae.js";import{u as T}from"./vue-router@4.1.6_vue@3.2.47-157ae188.js";import{j as B,r as y,u as o}from"./@vue_reactivity@3.2.47-f1f0bfd6.js";import{c as $,e as D,L as a,Y as M,o as p,K as l,P as d,O as g}from"./@vue_runtime-core@3.2.47-fc168a25.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue_shared@3.2.47-ad77ec3c.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@vueuse_core@9.13.0_vue@3.2.47-9c54f61c.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-c9be2d58.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-0922d443.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-78ff42bf.js";import"./pinia@2.0.33_vue@3.2.47-113b2d6e.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-6c5b1c66.js";import"./side-channel@1.1.0-50535f43.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-3d184ac6.js";import"./get-intrinsic@1.3.0-cf5c2bd1.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-b58db3ef.js";import"./dunder-proto@1.0.1-b234d88c.js";import"./call-bind-apply-helpers@1.0.2-ab6903ca.js";import"./function-bind@1.1.2-61637ca6.js";import"./hasown@2.0.2-f331d4a8.js";import"./call-bound@1.0.4-165459bc.js";import"./side-channel-weakmap@1.0.2-b72a0d20.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-19420b51.js";const N={searchMenuSpan:6,columnBtn:!1,border:!0,selection:!0,index:!1,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:350,align:"center",refreshBtn:!0,searchSize:"mini",addBtn:!1,editBtn:!1,delBtn:!1,viewBtn:!1,props:{label:"label",value:"value"},column:[{label:"产品名字",prop:"prodName",search:!0},{label:"商品原价",prop:"oriPrice"},{label:"商品现价",prop:"price"},{label:"商品库存",prop:"totalStocks"},{label:"产品图片",prop:"pic",type:"upload",width:150,listType:"picture-img"},{width:150,label:"状态",prop:"status",search:!0,slot:!0,type:"select",dicData:[{label:"未上架",value:0},{label:"上架",value:1}]}]},U={class:"mod-prod"},Me={__name:"index",setup(V){const C=B({delBtn:u("prod:prod:delete")}),m=y([]),n=B({total:0,currentPage:1,pageSize:10}),h=y(!1),v=(e,t,i)=>{h.value=!0,s({url:s.adornUrl("/prod/prod/page"),method:"get",params:s.adornParams(Object.assign({current:e==null?n.currentPage:e.currentPage,size:e==null?n.pageSize:e.pageSize},t))}).then(({data:c})=>{m.value=c.records;for(const f in m.value)if(m.value.hasOwnProperty(f)){const r=m.value[f];r.imgs=r.imgs.split(",")[0]}n.total=c.total,h.value=!1,i&&i()})},w=T(),b=e=>{w.push({path:"/prodInfo",query:{prodId:e}})},k=e=>{const t=L();e&&t.push(e),A.confirm(`确定进行[${e?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s({url:s.adornUrl("/prod/prod"),method:"delete",data:s.adornData(t,!1)}).then(()=>{O({message:"操作成功",type:"success",duration:1500,onClose:()=>{v(n)}})})}).catch(()=>{})},S=(e,t)=>{v(n,e,t)},_=y([]),x=e=>{_.value=e},L=()=>{var e;return(e=_.value)==null?void 0:e.map(t=>t.prodId)};return(e,t)=>{const i=z,c=E,f=M("avue-crud");return p(),$("div",U,[D(f,{ref:"crudRef",page:o(n),data:o(m),"table-loading":o(h),permission:o(C),option:o(N),onSearchChange:S,onSelectionChange:x,onOnLoad:v},{"menu-left":a(()=>[o(u)("shop:pickAddr:save")?(p(),l(i,{key:0,type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=P(r=>b(),["stop"]))},{default:a(()=>[d(" 新增 ")]),_:1})):g("",!0),o(u)("shop:pickAddr:delete")?(p(),l(i,{key:1,type:"danger",disabled:o(_).length<=0,onClick:t[1]||(t[1]=r=>k())},{default:a(()=>[d(" 批量删除 ")]),_:1},8,["disabled"])):g("",!0)]),status:a(r=>[r.row.status===1?(p(),l(c,{key:0},{default:a(()=>[d(" 上架 ")]),_:1})):(p(),l(c,{key:1},{default:a(()=>[d(" 未上架 ")]),_:1}))]),menu:a(r=>[o(u)("prod:prod:update")?(p(),l(i,{key:0,type:"primary",icon:"el-icon-edit",onClick:I=>b(r.row.prodId)},{default:a(()=>[d(" 修改 ")]),_:2},1032,["onClick"])):g("",!0),o(u)("prod:prod:delete")?(p(),l(i,{key:1,type:"danger",icon:"el-icon-delete",onClick:I=>k(r.row.prodId)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])):g("",!0)]),_:1},8,["page","data","table-loading","permission","option"])])}}};export{Me as default};
