import{g as x,a as S,e as O}from"./element-plus@2.3.6_vue@3.2.47-037a6c04.js";import{w as f}from"./@vue_runtime-dom@3.2.47-65c92196.js";import{h as n}from"./index-be04e3b6.js";import{r as c,j as w,u as i}from"./@vue_reactivity@3.2.47-b35eb3c0.js";import{c as L,e as s,L as a,K as U,O as $,Y as z,o as B,P as d,n as V}from"./@vue_runtime-core@3.2.47-7772318f.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue-6f24a81e.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@vueuse_core@9.13.0_vue@3.2.47-d6dd9705.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-4c633672.js";import"./@vue_shared@3.2.47-804b7488.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-7a72a0ae.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-0569e333.js";import"./pinia@2.0.33_vue@3.2.47-da3f2561.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-3725844c.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-52add623.js";import"./side-channel@1.1.0-d2eaf7ff.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-41168540.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-6131bab0.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-68021b12.js";const D={searchMenuSpan:6,columnBtn:!1,border:!0,selection:!0,index:!1,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:350,align:"center",refreshBtn:!0,searchSize:"mini",addBtn:!1,editBtn:!1,delBtn:!1,viewBtn:!1,props:{label:"label",value:"value"},column:[{label:"参数名",prop:"paramKey",search:!0},{label:"参数值",prop:"paramValue"},{label:"备注",prop:"remark"}]},E={class:"mod-config"},De={__name:"index",setup(M){const g=c([]),p=w({total:0,currentPage:1,pageSize:10}),l=(e,t,o)=>{n({url:n.adornUrl("/sys/config/page"),method:"get",params:n.adornParams(Object.assign({current:e==null?p.currentPage:e.currentPage,size:e==null?p.pageSize:e.pageSize},t))}).then(({data:r})=>{g.value=r.records,p.total=r.total,o&&o()})},C=(e,t)=>{l(p,e,t)},u=c([]),k=e=>{u.value=e},h=c(!1),v=c(null),_=e=>{h.value=!0,V(()=>{var t;(t=v.value)==null||t.init(e)})},b=e=>{var o;const t=e?[e]:(o=u.value)==null?void 0:o.map(r=>r.id);x.confirm(`确定对[id=${t.join(",")}]进行[${e?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{n({url:n.adornUrl("/sys/config"),method:"delete",data:n.adornData(t,!1)}).then(()=>{S({message:"操作成功",type:"success",duration:1500,onClose:()=>{l()}})})}).catch(()=>{})};return(e,t)=>{const o=O,r=z("avue-crud");return B(),L("div",E,[s(r,{ref:"crudRef",page:i(p),data:i(g),option:i(D),onSearchChange:C,onSelectionChange:k,onOnLoad:l},{"menu-left":a(()=>[s(o,{type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=f(m=>_(),["stop"]))},{default:a(()=>[d(" 新增 ")]),_:1}),s(o,{type:"danger",disabled:i(u).length<=0,onClick:t[1]||(t[1]=m=>b())},{default:a(()=>[d(" 批量删除 ")]),_:1},8,["disabled"])]),menu:a(m=>[s(o,{type:"primary",icon:"el-icon-edit",onClick:f(y=>_(m.row.id),["stop"])},{default:a(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),s(o,{type:"danger",icon:"el-icon-delete",onClick:f(y=>b(m.row.id),["stop"])},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["page","data","option"]),i(h)?(B(),U(i(v),{key:0,ref:"addOrUpdateRef",onRefreshDataList:l},null,512)):$("",!0)])}}};export{De as default};
