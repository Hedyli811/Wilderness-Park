import{a as B,c as L,b as O,G as $,H as F,F as q,d as N,e as E,f as z,g as A,A as I}from"./element-plus@2.3.6_vue@3.2.47-037a6c04.js";import{b as M,w as K}from"./@vue_runtime-dom@3.2.47-65c92196.js";import{h as p,a as U}from"./index-be04e3b6.js";import{D as P}from"./debounce-d39f6322.js";import{r as v,u as o,i as j,j as G}from"./@vue_reactivity@3.2.47-b35eb3c0.js";import{o as c,K as g,L as e,a as H,e as l,P as n,n as w,c as Y,O as D,Y as J}from"./@vue_runtime-core@3.2.47-7772318f.js";import{O as Q}from"./@vue_shared@3.2.47-804b7488.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue-6f24a81e.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@vueuse_core@9.13.0_vue@3.2.47-d6dd9705.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-4c633672.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-7a72a0ae.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-0569e333.js";import"./pinia@2.0.33_vue@3.2.47-da3f2561.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-3725844c.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-52add623.js";import"./side-channel@1.1.0-d2eaf7ff.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-41168540.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-6131bab0.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-68021b12.js";const W={searchMenuSpan:6,columnBtn:!1,border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"标签名称",prop:"title",search:!0,slot:!0},{label:"状态",prop:"status",type:"select",slot:!0,search:!0,dicData:[{label:"禁用",value:0},{label:"正常",value:1}]},{label:"默认类型",prop:"isDfault",slot:!0},{label:"排序",prop:"seq"}]},X={class:"dialog-footer"},Z={__name:"add-or-update",emits:["refreshDataList"],setup(R,{expose:V,emit:_}){const m=v(!1),y={},a=v({id:null,title:null,shopId:null,status:1,isDefault:null,prodCount:null,seq:null,style:0});V({init:b=>{a.value.id=b||0,m.value=!0,w(()=>{var t;(t=k.value)==null||t.resetFields(),a.value.id&&p({url:p.adornUrl("/prod/prodTag/info/"+a.value.id),method:"get",params:p.adornParams()}).then(({data:r})=>{a.value=r})})}});const k=v(null),h=P(()=>{var b;(b=k.value)==null||b.validate(t=>{t&&p({url:p.adornUrl("/prod/prodTag"),method:a.value.id?"put":"post",data:p.adornData(a.value)}).then(()=>{B({message:"操作成功",type:"success",duration:1500,onClose:()=>{m.value=!1,_("refreshDataList")}})})})});return(b,t)=>{const r=L,s=O,i=$,f=F,T=q,d=N,C=E,S=z;return c(),g(S,{modelValue:o(m),"onUpdate:modelValue":t[7]||(t[7]=u=>j(m)?m.value=u:null),title:o(a).id?"修改":"新增","close-on-click-modal":!1},{footer:e(()=>[H("div",X,[l(C,{onClick:t[5]||(t[5]=u=>m.value=!1)},{default:e(()=>[n(" 取消 ")]),_:1}),l(C,{type:"primary",onClick:t[6]||(t[6]=u=>o(h)())},{default:e(()=>[n(" 确定 ")]),_:1})])]),default:e(()=>[l(d,{ref_key:"dataFormRef",ref:k,model:o(a),rules:y,"label-width":"80px",onKeyup:t[4]||(t[4]=M(u=>o(h)(),["enter"]))},{default:e(()=>[l(s,{label:"标签名称",rules:[{required:!0,message:"标签名称不能为空",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"请输入正确的标签名称",trigger:"blur"}],prop:"title"},{default:e(()=>[l(r,{modelValue:o(a).title,"onUpdate:modelValue":t[0]||(t[0]=u=>o(a).title=u)},null,8,["modelValue"])]),_:1}),l(s,{label:"状态",prop:"status"},{default:e(()=>[l(f,{modelValue:o(a).status,"onUpdate:modelValue":t[1]||(t[1]=u=>o(a).status=u)},{default:e(()=>[l(i,{label:1},{default:e(()=>[n(" 正常 ")]),_:1}),l(i,{label:0},{default:e(()=>[n(" 禁用 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"列表样式",prop:"style"},{default:e(()=>[l(f,{modelValue:o(a).style,"onUpdate:modelValue":t[2]||(t[2]=u=>o(a).style=u)},{default:e(()=>[l(i,{label:0},{default:e(()=>[n(" 一列一个 ")]),_:1}),l(i,{label:1},{default:e(()=>[n(" 一列两个 ")]),_:1}),l(i,{label:2},{default:e(()=>[n(" 一列三个 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"排序",prop:"seq"},{default:e(()=>[l(T,{modelValue:o(a).seq,"onUpdate:modelValue":t[3]||(t[3]=u=>o(a).seq=u),"controls-position":"right",min:0,label:"排序号"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},ee={class:"mod-prod-prodTag"},Ze={__name:"index",setup(R){const V=v([]),_=G({total:0,currentPage:1,pageSize:10}),m=v(!1),y=(r,s,i)=>{m.value=!0,p({url:p.adornUrl("/prod/prodTag/page"),method:"get",params:p.adornParams(Object.assign({current:r==null?_.currentPage:r.currentPage,size:r==null?_.pageSize:r.pageSize},s))}).then(({data:f})=>{V.value=f.records,_.total=f.total,m.value=!1,i&&i()})},a=v(!1),x=v(null),k=r=>{a.value=!0,w(()=>{var s;(s=x.value)==null||s.init(r)})},h=r=>{A.confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p({url:p.adornUrl("/prod/prodTag/"+r),method:"delete",data:p.adornData({})}).then(()=>{B({message:"操作成功",type:"success",duration:1500,onClose:()=>{y(_)}})})}).catch(()=>{})},b=()=>{y(_)},t=(r,s)=>{y(_,r,s)};return(r,s)=>{const i=E,f=I,T=J("avue-crud");return c(),Y("div",ee,[l(T,{ref:"crudRef",page:o(_),data:o(V),"table-loading":o(m),option:o(W),onSearchChange:t,onOnLoad:y,onRefreshChange:b},{"menu-left":e(()=>[o(U)("prod:prodTag:save")?(c(),g(i,{key:0,type:"primary",icon:"el-icon-plus",onClick:s[0]||(s[0]=d=>k())},{default:e(()=>[n(" 新增 ")]),_:1})):D("",!0)]),title:e(d=>[n(Q(d.row.title||"-"),1)]),status:e(d=>[d.row.status===0?(c(),g(f,{key:0,type:"danger"},{default:e(()=>[n(" 禁用 ")]),_:1})):(c(),g(f,{key:1},{default:e(()=>[n(" 正常 ")]),_:1}))]),isDfault:e(d=>[d.row.isDefault===0?(c(),g(f,{key:0},{default:e(()=>[n(" 自定义类型 ")]),_:1})):(c(),g(f,{key:1},{default:e(()=>[n(" 默认类型 ")]),_:1}))]),menu:e(d=>[o(U)("prod:prodTag:update")?(c(),g(i,{key:0,type:"primary",icon:"el-icon-edit",onClick:C=>k(d.row.id)},{default:e(()=>[n(" 修改 ")]),_:2},1032,["onClick"])):D("",!0),o(U)("prod:prodTag:delete")?(c(),g(i,{key:1,type:"danger",icon:"el-icon-delete",onClick:K(C=>h(d.row.id),["stop"])},{default:e(()=>[n(" 删除 ")]),_:2},1032,["onClick"])):D("",!0)]),_:1},8,["page","data","table-loading","option"]),o(a)?(c(),g(Z,{key:0,ref_key:"addOrUpdateRef",ref:x,onRefreshDataList:b},null,512)):D("",!0)])}}};export{Ze as default};
