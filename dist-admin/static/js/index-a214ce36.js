import{c as O,b as L,I as z,d as K,e as R,f as M,a as B,P as j,g as q}from"./element-plus@2.3.6_vue@3.2.47-037a6c04.js";import{b as A}from"./@vue_runtime-dom@3.2.47-65c92196.js";import{h as o,t as T,_ as G}from"./index-be04e3b6.js";import{D as H}from"./debounce-d39f6322.js";import{j as C,r as i,u as r,i as D}from"./@vue_reactivity@3.2.47-b35eb3c0.js";import{o as U,K as w,L as s,a as E,e as l,P as b,n as P,x as J,f as Q,c as W,O as X}from"./@vue_runtime-core@3.2.47-7772318f.js";import{O as Y}from"./@vue_shared@3.2.47-804b7488.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue-6f24a81e.js";import"./@ctrl_tinycolor@3.6.1-6620e546.js";import"./@vueuse_core@9.13.0_vue@3.2.47-d6dd9705.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-4c633672.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-7a72a0ae.js";import"./@sxzz_popperjs-es@2.11.7-17ad78e6.js";import"./dayjs@1.11.19-0819d722.js";import"./async-validator@4.2.5-62e2fe13.js";import"./memoize-one@6.0.0-7e4bb68a.js";import"./escape-html@1.0.3-4e0a8349.js";import"./normalize-wheel-es@1.2.0-723c8681.js";import"./@floating-ui_dom@1.7.4-7095b9f8.js";import"./@floating-ui_core@1.7.3-3f397b79.js";import"./@floating-ui_utils@0.2.10-53750fea.js";import"./lodash-unified@1.0.3_@types_97fcb82fcbefb8c62463eca8780b3bb2-079fba74.js";import"./vue@3.2.47-0569e333.js";import"./pinia@2.0.33_vue@3.2.47-da3f2561.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-3725844c.js";import"./vue-cookies@1.8.3-3659d826.js";import"./axios@1.3.4-7f28dcc5.js";import"./qs@6.11.1-52add623.js";import"./side-channel@1.1.0-d2eaf7ff.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-e0b94579.js";import"./crypto-js@4.1.1-034e6822.js";import"./side-channel-list@1.0.0-52efb099.js";import"./side-channel-map@1.0.1-41168540.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-6131bab0.js";import"./lodash@4.17.21-30260a07.js";import"./@smallwei_avue@3.2.22_eleme_cfde8b18620b223d8d5d842b89bb35e0-68021b12.js";const Z={class:"dialog-footer"},ee={__name:"add-or-update",emits:["refreshDataList"],setup($,{expose:c,emit:y}){const h=C({areaName:[{required:!0,message:"区域名称不能为空",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"请输入正确的区域名称",trigger:"blur"}]}),n=i(!1),g=i([]),t=i({areaId:"",areaName:null,parentId:null,level:null}),f=C({value:"areaId",label:"areaName",checkStrictly:!0}),d=i([]),_=i(null);c({init:a=>{t.value.areaId=a||0,n.value=!0,d.value=[],P(()=>{var e;(e=_.value)==null||e.resetFields(),t.value.areaId&&o({url:o.adornUrl("/admin/area/info/"+t.value.areaId),method:"get",params:o.adornParams()}).then(({data:m})=>{t.value=m,d.value=t.value.parentId,f.areaId=t.value.areaId,f.areaName=t.value.areaName}),o({url:o.adornUrl("/admin/area/list"),method:"get",params:o.adornParams()}).then(({data:m})=>{g.value=T(m,"areaId","parentId")})})}});const k={total:0,currentPage:1,pageSize:20},x=H(()=>{var a;(a=_.value)==null||a.validate(e=>{e&&o({url:o.adornUrl("/admin/area"),method:t.value.areaId?"put":"post",data:o.adornData(t.value)}).then(()=>{B({message:"操作成功",type:"success",duration:1500,onClose:()=>{n.value=!1,y("refreshDataList",k)}})})})}),V=a=>{t.value.parentId=a[a.length-1]};return(a,e)=>{const m=O,v=L,N=z,p=K,I=R,F=M;return U(),w(F,{modelValue:r(n),"onUpdate:modelValue":e[5]||(e[5]=u=>D(n)?n.value=u:null),title:r(t).areaId?"修改":"新增","close-on-click-modal":!1},{footer:s(()=>[E("div",Z,[l(I,{onClick:e[3]||(e[3]=u=>n.value=!1)},{default:s(()=>[b(" 取消 ")]),_:1}),l(I,{type:"primary",onClick:e[4]||(e[4]=u=>r(x)())},{default:s(()=>[b(" 确定 ")]),_:1})])]),default:s(()=>[l(p,{ref_key:"dataFormRef",ref:_,model:r(t),rules:r(h),"label-width":"100px",onKeyup:e[2]||(e[2]=A(u=>r(x)(),["enter"]))},{default:s(()=>[l(v,{label:"地区名称",prop:"areaName"},{default:s(()=>[l(m,{modelValue:r(t).areaName,"onUpdate:modelValue":e[0]||(e[0]=u=>r(t).areaName=u),placeholder:"请输入地区名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(v,{label:"上级地区",prop:"parentId"},{default:s(()=>[l(N,{modelValue:r(d),"onUpdate:modelValue":e[1]||(e[1]=u=>D(d)?d.value=u:null),"expand-trigger":"hover",options:r(g),props:r(f),"change-on-select":"",filterable:"",onChange:V},null,8,["modelValue","options","props"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};const ae={class:"mod-sys-area"},te={class:"addr-name"},oe={__name:"index",setup($){const c=i(""),y={id:"areaId",label:"areaName",children:"children"},h=i(null);J(()=>c,a=>{var e;(e=h.value)==null||e.filter(a)}),Q(()=>{t(n)});const n=C({total:0,currentPage:1,pageSize:10}),g=i(null),t=(a,e)=>{o({url:o.adornUrl("/admin/area/list"),method:"get",params:o.adornParams(Object.assign({current:a==null?n.currentPage:a.currentPage,size:a==null?n.pageSize:a.pageSize},e))}).then(({data:m})=>{g.value=T(m,"areaId","parentId")})},f=i(null),d=i(!1),_=a=>{d.value=!0,P(()=>{var e;(e=f.value)==null||e.init(a)})},S=a=>{q.confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o({url:o.adornUrl("/admin/area/"+a),method:"delete",data:o.adornData({})}).then(()=>{B({message:"操作成功",type:"success",duration:1500,onClose:()=>{t(n)}})})}).catch(()=>{})},k=(a,e)=>{_(e.areaId)},x=(a,e)=>{S(e.areaId)},V=(a,e)=>a?e.areaName.indexOf(a)!==-1:!0;return(a,e)=>{const m=O,v=R,N=j;return U(),W("div",ae,[l(m,{modelValue:r(c),"onUpdate:modelValue":e[0]||(e[0]=p=>D(c)?c.value=p:null),class:"area-search-input",placeholder:"地区关键词"},null,8,["modelValue"]),l(v,{type:"primary",class:"area-add-btn",onClick:e[1]||(e[1]=p=>_())},{default:s(()=>[b(" 新增 ")]),_:1}),l(N,{ref_key:"tree2Ref",ref:h,data:r(g),"node-key":"areaId","filter-node-method":V,props:y,"expand-on-click-node":!1},{default:s(({node:p,data:I})=>[E("span",te,Y(p.label),1),E("span",null,[l(v,{type:"text",icon:"el-icon-edit",onClick:()=>k(p,I)},{default:s(()=>[b(" 修改 ")]),_:2},1032,["onClick"]),l(v,{type:"text",icon:"el-icon-delete",onClick:()=>x(p,I)},{default:s(()=>[b(" 删除 ")]),_:2},1032,["onClick"])])]),_:1},8,["data"]),r(d)?(U(),w(ee,{key:0,ref_key:"addOrUpdateRef",ref:f,onRefreshDataList:t,onClose:e[2]||(e[2]=p=>d.value=!1)},null,512)):X("",!0)])}}},ta=G(oe,[["__scopeId","data-v-e66778bb"]]);export{ta as default};
